<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>ECE5160- Fast Robot</title>
        <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
            <a class="navbar-brand js-scroll-trigger" href="#page-top">
                <span class="d-block d-lg-none">Sizhe Gao</span>
                <span class="d-none d-lg-block"><img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="assets/img/selfie.jpg" alt="..." /></span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#about">About</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Lab1">Lab1</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Lab2">Lab2</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Lab3">Lab3</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Lab4">Lab4</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Lab5">Lab5</a></li>
                </ul>
            </div>
        </nav>
        <!-- Page Content-->
        <div class="container-fluid p-0">
            <!-- About-->
            <section class="resume-section" id="about">
                <div class="resume-section-content">
                    <h1 class="mb-0">
                        Sizhe
                        <span class="text-primary">Gao</span>
                    </h1>
                    <div class="subheading mb-5">
                        ECE5160 Fast Robot Â·
                        <a href="mailto:sg2267@cornell.edu">sg2267@cornell.edu</a>
                    </div>
                    <p class="lead mb-5">Hello! I am a MEng ECE student at Cornell University. I am interested in robotics and enjoy any hand-in experiments.  </p>
                    <p class="lead mb-5">This webpage serves as documentation for ECE5160  </p>
                </div>
            </section>
            <hr class="m-0" />
            <!-- Lab1-->
            <section class="resume-section" id="Lab1">
                <div class="resume-section-content">
                    <h2 class="mb-5">Lab1</h2>
                    <p>The purpose of first Lab is to setup the Arduino IDE and the Artemis board, and test hardware components on the board.</p>
                    <p>Before the lab, I intalled the latest version of Arduino IDE. </p>
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <div class="subheading mb-3">Step One</div>
                            <p>Connect the Artemis board to my computer, and follow the instruction provided in course website to install the Arduino Core for Apollo3</p>
                        </div>
                    </div>
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <div class="subheading mb-3">Blink</div>
                            <p>After selecting board nano and USB port, I followed the instruction example: blink it up. I chose the blink example and the result showed as below video:</p>
                            <iframe width="560" height="315" src="https://www.youtube.com/embed/xPFauOEw6mc" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                        </div>
                    </div>
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <div class="subheading mb-3">Serial</div>
                            <p>I ran the serial example in Arduino, in my computer I found out that it was Example2 instead of Example4. It echos back well based on provided input.</p>
                            <span class="d-none d-lg-block"><img class="img-fluid mx-auto mb-2" width="560" height="315" src="assets/Lab1/serial.jpg" alt="..." /></span>
                        </div>
                    </div>
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <div class="subheading mb-3">AnalogRead</div>
                            <p>I ran the analogRead example in Arduino, and it was Example4 instead of Example2. It was used to the temperature sensor on the board. I works well and displayed the temperature results. When I touched the sensor with hand, the value changed.</p>
                            <span class="d-none d-lg-block"><img class="img-fluid mx-auto mb-2" width="560" height="315" src="assets/Lab1/temp.jpg" alt="..." /></span>
                        </div>
                    </div>
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <div class="subheading mb-3">PDM and Additional Work</div>
                            <p>The Example1_MicrophoneOutput under PDM of Arduino Example was used to test the microphone. When I made sound in different tones, the output would showed the corresponding frequecies.</p>
                            <p>I added the code below to the function "printLoudest" of the example so that the board would light up the blue LED when A note was played over the speaker, and turn off otherwise.
                                The frequency of A note was around 440hz. I tested and figured out that the board recognized the 440hz I played as 434hz. Then I switched the condition that LED would be lighted up under 434hz.
                            </p>
                            <iframe width="560" height="315" src="https://www.youtube.com/embed/DkFVIw9afCs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                            <p>Code:</p>
                            <span class="d-none d-lg-block"><img class="img-fluid mx-auto mb-2" width="560" height="315" src="assets/Lab1/micro.jpg" alt="..." /></span>
                        </div>
                    </div>
                    
                </div>
            </section>
            <hr class="m-0" />
            <!-- Lab2-->
            <section class="resume-section" id="Lab2">
                <div class="resume-section-content">
                    <h2 class="mb-5">Lab2</h2>
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <div class="subheading mb-3">Prelab</div>
                            <p>The first section of the prelab is to install the python, and I updated my python version to 3.10 which satisfied the requirement. Later I installed the virtual envrionment packages and 
                                after activate the virtual envrionment, my terminal CLI prompt shows the prefix FastRobots_ble as the figure one below.
                            </p>
                            <span class="d-none d-lg-block"><img class="img-fluid mx-auto mb-2" width="680" height="420" src="assets/Lab2/envri.jpg" alt="..." /><figcaption>Figure 1. Virtual Envrionment</figcaption></span>
                            <br> <!--New Line-->
                            <p>Then I installed the ArduinoBLE from the library manager in the Arduino IDE. After loading the ble_arduino.ino code into the Artemis board from the codebase, I did not change the baud rate to 
                                115200 bps at first, and the output was messy characters. Then when I switched to the correct baud rate, the board printed my MAC address in serial monitor as Figure 2.
                            </p>
                            <span class="d-none d-lg-block"><img class="img-fluid mx-auto mb-2" width="680" height="420" src="assets/Lab2/ble.jpg" alt="..." /><figcaption>Figure 2. BLE MAC address</figcaption></span>
                            <br> <!--New Line-->
                            <p>After printing out my MAC address and generate unique uuid, I updated my MAC address in connection.yaml and replaced BLEService UUID in both the sketch ble_arduino.ino and connections.yaml.
                                Since my computer is MACOS, I initially did not change the line 53 of base_ble.py from "if IS_ATLEAST_MAC_OS_12:" to "if True". The bluetooth did not work and connection always failed, the error message
                                showed that it could not find the address. Then I modified the line 53 to "if True" mentioned above, the connection worked quit stable and demo.ipynb notebook could pass the test shown as figure below.
                            </p>
                            <span class="d-none d-lg-block"><img class="img-fluid mx-auto mb-2" width="680" height="420" src="assets/Lab2/config_3.jpg" alt="..." /></span>
                            <span class="d-none d-lg-block"><img class="img-fluid mx-auto mb-2" width="680" height="420" src="assets/Lab2/Configuration_1.jpg" alt="..." /></span>
                            <span class="d-none d-lg-block"><img class="img-fluid mx-auto mb-2" width="680" height="420" src="assets/Lab2/Configuration2.jpg" alt="..." /><figcaption>Figure 3. demo.ipynb output</figcaption></span>
                        </div>
                    </div>
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <div class="subheading mb-3">Codebase</div>
                            <p>In the ble_robot directory, it contains the ble_arduino folder and ble_python folder. The ble_arduino includes c header files and the .ino file which should be uploaded to Artemis board. 
                                The ble_python primarily includes the demo which is the Jupter Notebook to run command, .yaml file which assigned uuids for bluetooth connections, and cmd_types.py which class involves all the commands.
                            </p>
                            <br> <!--New Line-->
                            <p>For the bluetooth connection, in the computer side, the .yaml file should assign unique uuids for building the connection. And in the arduino side, the .ino file should change to the same uuids as .yaml file
                                so that the ble could find out and pair the bluetooth connection.
                            </p>                  
                        </div>
                    </div>
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <div class="subheading mb-3">Task One -- ECHO</div>
                            <p>The first task was to send ECHO command to Artemis board with string message, and my computer received the augmented string back. In my code, I sent a "HiHello" message with ECHO command to Artemis board, and it sent back 
                                "Robot says -> HiHello" to my computer. The code from computer was as Figure 4 below.
                            </p>
                            <span class="d-none d-lg-block"><img class="img-fluid mx-auto mb-2" width="680" height="420" src="assets/Lab2/Task1_2.jpg" alt="..." /><figcaption>Figure 4. demo.ipynb code for ECHO</figcaption></span>
                            <br> <!--New Line-->
                            <p>The following code demonstrated how Artemis board augmented the string "HiHello". Besides the work mentioned before, for each added cases (commands), I should add the command name to the file "cmd_types.py" so that computer could find the commands.</p>
                            <span class="d-none d-lg-block"><img class="img-fluid mx-auto mb-2" width="680" height="420" src="assets/Lab2/Task1_1.jpg" alt="..." /><figcaption>Figure 5. Arduino code for ECHO</figcaption></span>
                        </div>
                    </div>
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <div class="subheading mb-3">Task Two -- GET_TIME_MILLIS</div>
                            <p>This task I added ono more case in Arduino as Figure 6 below, the function "millis()" would return the runtime in milliseconds of since the board began to run the program. Since the returned type of "millis()" was unsigned long, 
                                I switched the output type to float.
                            </p>
                            <span class="d-none d-lg-block"><img class="img-fluid mx-auto mb-2" width="680" height="420" src="assets/Lab2/task2_code.jpg" alt="..." /><figcaption>Figure 6. Arduino code for GET_TIME_MILLIS</figcaption></span>
                            <br> <!--New Line-->
                            <p>Following is the code which sent the command and receive the result of time printed.</p>
                            <span class="d-none d-lg-block"><img class="img-fluid mx-auto mb-2" width="680" height="420" src="assets/Lab2/task2_demo.jpg" alt="..." /><figcaption>Figure 7. demo.ipynb code for GET_TIME_MILLIS</figcaption></span>
                        </div>
                    </div>
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <div class="subheading mb-3">Task Three -- Notification Handler</div>
                            <p>This task I called the "ble.start_notify" function to start the notification handler, and there was a "ble.stop_notify" below to stop the handler. The callback function had uuid and bytearray as the 
                                elements and printed out the time which extracted from the string (bytearray) by function "ble.bytearray_to_float()".
                            </p>
                            <span class="d-none d-lg-block"><img class="img-fluid mx-auto mb-2" width="680" height="420" src="assets/Lab2/Task3.jpg" alt="..." /><figcaption>Figure 8. Notification Handler</figcaption></span>
                            <br> <!--New Line-->
                            <p>Below video printed the output of notification handler which demonstrated how it received the string value constantly</p>
                            <iframe width="560" height="315" src="https://www.youtube.com/embed/4j1ymOLxpZI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                        </div>
                    </div>
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <div class="subheading mb-3">Task Four -- GET_TEMP_5s</div>
                            <p>In the Artemis board, after receiving the GET_TEMP_5s command, it returned an array of five timestamped internal die temperature readings. The result was in pairs of time and temperature.
                                Time was got by function "millis()" and die temperature was from function "getTempDecC()". Each second the array will be appended the pair of time and temperature.
                            </p>
                            <span class="d-none d-lg-block"><img class="img-fluid mx-auto mb-2" width="680" height="420" src="assets/Lab2/Task4_arduino.jpg" alt="..." /><figcaption>Figure 9. Arduino code for GET_TEMP_5s</figcaption></span>
                            <br> <!--New Line-->
                            <p>The figure below used the notification handler to receive, update, and print the array. And demonstrated the five timestamped readings sent back from Artemis board, one second each.</p>
                            <span class="d-none d-lg-block"><img class="img-fluid mx-auto mb-2" width="680" height="420" src="assets/Lab2/Task4_demo.jpg" alt="..." /><figcaption>Figure 10. demo.ipynb for GET_TEMP_5s</figcaption></span>
                        </div>
                    </div>
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <div class="subheading mb-3">Task Five -- GET_TEMP_5s_RAPID</div>
                            <p>The task was similar to task four, but it required to sends as array of five seconds worth of rapidly sampled temperature data, and it should be at least fifty temperatures. Initially, I directly appended 
                                the temperatures and times in the while loop without clear the arrray everytime, the character size quickly reached the limitation and stopped running. I also added a counter to count how many points were sent.
                                And the "delay(100)" was added each loop since it was important for the program to run continuously. The arduino code was as Figure 11.
                            </p>
                            <span class="d-none d-lg-block"><img class="img-fluid mx-auto mb-2" width="680" height="420" src="assets/Lab2/task5_arduino.jpg" alt="..." /><figcaption>Figure 11. Arduino code for GET_TEMP_5s_RAPID</figcaption></span>
                            <br> <!--New Line-->
                            <p>In the computer, I also used the notification handler to get the array updated. The video below could show how the time and temperature updated, and the total count of points was fifty.</p>
                            <iframe width="560" height="315" src="https://www.youtube.com/embed/3cjnlpwk1yY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                        </div>
                    </div>
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <div class="subheading mb-3">Task Six -- Limitations</div>
                            <p>The Artemis board has 384KB of RAM in total, and it should be 384000 bytes after conversion. If each time the data size is 16 bits (2 bytes), and the rate is 150 HZ. 
                                Based on the calculation, in 5 min we can send (5*60)/(1/150) * 2 = 90000 bytes. To reach the limitation 384000 bytes, 384000 / 90000 = 4.267, 4.267 group of 5 min 
                                which in total is 1280s. Therefore, 1280 seconds of 16 bits data taken at 150 Hz can be sent without running out of memory. 
                            </p>
                        </div>
                    </div>
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <div class="subheading mb-3">5000-level Task -- Effective Data Rate And Overhead</div>
                            <p>To test the data rate, I generated a for loop which started at 5 bytes, increased 5 bytes each time, and ended at 125 bytes. The initial time would be reset each loop. For each sent message,
                                I ran 100 times and calculated the average millisecond it took to increase to correctness. The millisecond for each time was calculated in the notification handler. 
                            </p>
                            <span class="d-none d-lg-block"><img class="img-fluid mx-auto mb-2" width="680" height="420" src="assets/Lab2/data_rate_demo.jpg" alt="..." /></span>
                            <span class="d-none d-lg-block"><img class="img-fluid mx-auto mb-2" width="680" height="420" src="assets/Lab2/data_rate_ar.jpg" alt="..." /><figcaption>Figure 11. Data_Rate</figcaption></span>
                            <br> <!--New Line-->
                            <p>After getting the times, I plotted the graph below with bytes versus time(s). As shown in the plot, the larger data size required more time to complete.</p>
                            <span class="d-none d-lg-block"><img class="img-fluid mx-auto mb-2" width="680" height="420" src="assets/Lab2/graph.jpg" alt="..." /><figcaption>Figure 12. Plot</figcaption></span>
                            <br> <!--New Line-->
                            <p>The larger data size would result in larger data rate. Therefore, the larger packets actually help to reduce overhead, and short packets have more overhead.</p>
                        </div>
                    </div>
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <div class="subheading mb-3">5000-level Task -- Reliability</div>
                            <p>For testing this section, I added one more for loop to send 300 times data without delay and printed out the actually sending and receiving packets. It perfectly matached that 
                                the sent count and receive count were both 300. That means, the computer did not miss any data packets from the Artemis board.
                            </p> 
                        </div>
                    </div>
                </div>
            </section>
            <hr class="m-0" />
            <!-- Lab3-->
            <section class="resume-section" id="Lab3">
                <div class="resume-section-content">
                    <h2 class="mb-5">Lab3</h2>
                    <div class="subheading mb-3">Programming Languages & Tools</div>
                </div>
            </section>
            <hr class="m-0" />
            <!-- Lab4-->
            <section class="resume-section" id="Lab4">
                <div class="resume-section-content">
                    <h2 class="mb-5">Lab4</h2>
                    <p>Apart from being a web developer, I enjoy most of my time being outdoors. In the winter, I am an avid skier and novice ice climber. During the warmer months here in Colorado, I enjoy mountain biking, free climbing, and kayaking.</p>
                    <p class="mb-0">When forced indoors, I follow a number of sci-fi and fantasy genre movies and television shows, I am an aspiring chef, and I spend a large amount of my free time exploring the latest technology advancements in the front-end web development world.</p>
                </div>
            </section>
            <hr class="m-0" />
            <!-- Lab5-->
            <section class="resume-section" id="Lab5">
                <div class="resume-section-content">
                    <h2 class="mb-5">Lab5</h2>
                    <ul class="fa-ul mb-0">
                        <li>
                            <span class="fa-li"><i class="fas fa-trophy text-warning"></i></span>
                            Google Analytics Certified Developer
                        </li>
                    </ul>
                </div>
            </section>
        </div>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
